> Tags: #对时

- [1 Time jump - software time](#_1-time-jump---software-time)
- [2 原因](#_2-%E5%8E%9F%E5%9B%A0)
- [3 解决方式](#_3-%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F)
- [4 参考说明](#_4-%E5%8F%82%E8%80%83%E8%AF%B4%E6%98%8E)

# 1 Time jump - software time

# 2 原因

- 此问题为Hypervisor下GPOS（Windows/Linux）与ARemb对时异常问题
- 若发现本地时间错乱跳变，且发现Logger中频繁记录30993，则此问题为AR的BUG
- 影响范围 4.7 ~ 4.11 的AR。
- 升级AR至 2021-04-15（D4.90） 及之后发布的AR版本
    - 开始出现此BUG的版本：B4.73
    - 建议使用此AR版本及之后版本：
        - D4.73
        - C4.83
        - D4.90
        - B4.91
        - A4.92
- 30993报错说明
    - Time jump - software time
    - 错误描述
        - 软件时间向前或向后跳变。
        - 在时间同步过程中，当软件时间与参考时间相差大于2秒时，就会发生这种情况。这种情况下，时间校正是通过向前或向后跳变秒数来调整的，软件时间调整时不会发生跳变。
    - 建议解决方式
        - 如果使用 RTC 而不是对时服务器作为参考时钟，则不应发生此错误。如果错误继续发生，原因可能是 CPU 利用率过高。然后时间同步任务没有获得 CPU，软件时间与时间源（RTC 的 SNTP）相差超过 2 秒。
        - 如果使用对时服务器进行时间同步，则应缩短 SNTP 同步间隔（请参阅 CPuporties/time synchronization）。如果时间服务器提供的时间不正确，或者发生故障并且目标系统切换到其他时间服务器或 RTC，也会出现此错误。

# 3 解决方式

- 更新AR版本至以下版本之后
- D4.73
- C4.83
- D4.90
- B4.91
- A4.92

# 4 参考说明

- [033Hypervisor双系统对时功能](/B02_技术_AutomationRuntime/033Hypervisor双系统对时功能.md)
